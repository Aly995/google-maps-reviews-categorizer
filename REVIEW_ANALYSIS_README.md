# Google Maps Review Analyzer

AI-powered sentiment analysis tool for Google Maps reviews scraped by this project.

## Features

- ðŸ¤– **AI-Powered Analysis**: Uses OpenAI's GPT-4o-mini to analyze review sentiment
- ðŸ“Š **Theme Extraction**: Automatically identifies the most common positive and negative themes
- ðŸ“ˆ **Frequency Counting**: Shows how often each theme is mentioned
- ðŸ“„ **Multiple Output Formats**: Generates both human-readable reports and JSON data
- ðŸ’° **Cost-Effective**: Uses GPT-4o-mini for affordable analysis

## Setup

### 1. Install Dependencies

```powershell
pip install -r requirements.txt
```

### 2. Configure OpenAI API Key

1. Get an API key from [OpenAI Platform](https://platform.openai.com/api-keys)
2. Create a `.env` file in the project directory:

```powershell
copy .env.example .env
```

3. Edit `.env` and add your API key:

```
OPENAI_API_KEY=sk-your-actual-api-key-here
```

## Usage

### Option 1: Standalone Script (Recommended)

Analyze any CSV file generated by the scraper:

```powershell
python analyze_reviews.py <path_to_csv_file>
```

**Example:**

```powershell
python analyze_reviews.py C:\Users\5lin6\.gemini\antigravity\scratch\output\khosh-cafe_reviews.csv
```

### Option 2: Python Module

Use the analyzer in your own Python scripts:

```python
from review_analyzer import ReviewAnalyzer

# Initialize analyzer
analyzer = ReviewAnalyzer()

# Analyze reviews from CSV
results = analyzer.analyze_reviews_from_csv(
    'output/khosh-cafe_reviews.csv',
    output_path='output/analysis_report.txt'
)

# Access results
print(f"Top positive themes: {results['positives'][:5]}")
print(f"Top negative themes: {results['negatives'][:5]}")
```

## Output

The analyzer generates three outputs:

1. **Console Output**: Real-time progress and formatted report
2. **Text Report** (`*_analysis_report.txt`): Human-readable summary with:
   - Overall sentiment statistics
   - Top 10 positive themes with frequency counts
   - Top 10 negative themes with frequency counts
3. **JSON Data** (`*_analysis.json`): Structured data for further processing

### Example Report

```
======================================================================
REVIEW ANALYSIS REPORT: Khosh Cafe
======================================================================

OVERALL SENTIMENT
----------------------------------------------------------------------
Positive mentions: 85 (73.3%)
Negative mentions: 31 (26.7%)

TOP POSITIVE THEMES
----------------------------------------------------------------------
 1. Great Coffee                          (mentioned 12 times)
 2. Friendly Staff                        (mentioned 10 times)
 3. Cozy Atmosphere                       (mentioned 9 times)
 4. Delicious Food                        (mentioned 8 times)
 5. Beautiful Decor                       (mentioned 7 times)

TOP NEGATIVE THEMES
----------------------------------------------------------------------
 1. Limited Seating                       (mentioned 6 times)
 2. High Prices                           (mentioned 5 times)
 3. Slow Service                          (mentioned 4 times)
```

## How It Works

1. **Batch Processing**: Reviews are analyzed in batches of 20 to optimize API usage
2. **Theme Extraction**: AI identifies specific, actionable themes (not generic sentiments)
3. **Normalization**: Themes are normalized and deduplicated
4. **Aggregation**: Counts are tallied across all batches
5. **Reporting**: Results are formatted into readable reports

## Cost Estimation

Using GPT-4o-mini (as of Feb 2026):
- **Input**: ~$0.15 per 1M tokens
- **Output**: ~$0.60 per 1M tokens

For a typical analysis of 40 reviews (~8,000 tokens):
- Estimated cost: **$0.01 - $0.02 per analysis**

## Troubleshooting

### "OpenAI API key not found"
- Make sure you created a `.env` file
- Verify the API key is correctly formatted: `OPENAI_API_KEY=sk-...`
- Check that `.env` is in the same directory as the scripts

### "API call failed"
- Check your internet connection
- Verify your API key is valid and has credits
- Check OpenAI's [status page](https://status.openai.com/)

### "No reviews to analyze"
- Verify the CSV file path is correct
- Check that the CSV has the correct format (Name, Rating, Date, Review columns)
- Ensure reviews were successfully scraped

## Tips for Best Results

- **More reviews = better insights**: Aim for at least 20-30 reviews for meaningful analysis
- **Diverse ratings**: Mix of high and low ratings provides balanced insights
- **Recent reviews**: More recent reviews may be more relevant to current business state
- **Multiple businesses**: Compare analysis across competitors for market insights
